(this.webpackJsonpstreamlit_file_browser=this.webpackJsonpstreamlit_file_browser||[]).push([[0],{38:function(e,t,a){e.exports=a(93)},93:function(e,t,a){"use strict";a.r(t);var l=a(1),n=a.n(l),i=a(31),s=a.n(i),o=a(5),r=a(21),d=a.n(r),c=a(4),h=a.n(c),E=a(34);var m=e=>{const{selectedItems:t,isFolder:a,icons:l,nameFilter:i,canCreateFolder:s,onCreateFolder:o,canRenameFile:r,onRenameFile:d,canRenameFolder:c,onRenameFolder:h,canDeleteFile:E,onDeleteFile:m,canDeleteFolder:f,onDeleteFolder:_,canDownloadFile:g,onDownloadFile:F,canDownloadFolder:p,onDownloadFolder:u,canChooseFile:O,onChooseFile:v,canChooseFolder:L,onChooseFolder:D}=e;let C=[];if(t.length){const e=t.filter(e=>e.action);if(e.length===t.length&&1===[...new Set(e)].length){let t;switch(e[0].action){case"delete":t="Deleting ...";break;case"rename":t="Renaming ...";break;default:t="Moving ..."}C=n.a.createElement("div",{className:"item-actions"},l.Loading," ",t)}else{a&&s&&!i&&C.push(n.a.createElement("li",{key:"action-add-folder"},n.a.createElement("a",{onClick:o,href:"#",role:"button"},l.Folder,"\xa0Add Subfolder")));const e=t.find(e=>!e.keyDerived);e||a||!r||1!==t.length?!e&&a&&c&&C.push(n.a.createElement("li",{key:"action-rename"},n.a.createElement("a",{onClick:h,href:"#",role:"button"},l.Rename,"\xa0Rename"))):C.push(n.a.createElement("li",{key:"action-rename"},n.a.createElement("a",{onClick:d,href:"#",role:"button"},l.Rename,"\xa0Rename"))),e||a||!E||C.push(n.a.createElement("li",{key:"action-delete"},n.a.createElement("a",{onClick:m,href:"#",role:"button"},l.Delete,"\xa0Delete"))),(!a&&g||a&&p)&&C.push(n.a.createElement("li",{key:"action-download"},n.a.createElement("a",{onClick:a?u:F,href:"#",role:"button"},l.Download,"\xa0Download"))),(!a&&O||a&&L)&&C.push(n.a.createElement("li",{key:"action-choose"},n.a.createElement("a",{onClick:a?D:v,href:"#",role:"button"},n.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"\xa0Choose"))),C=C.length?n.a.createElement("ul",{className:"item-actions"},C):n.a.createElement("div",{className:"item-actions"},"\xa0")}}else s&&!i&&C.push(n.a.createElement("li",{key:"action-add-folder"},n.a.createElement("a",{onClick:o,href:"#",role:"button"},l.Folder,"\xa0Add Folder"))),C=C.length?n.a.createElement("ul",{className:"item-actions"},C):n.a.createElement("div",{className:"item-actions"},"\xa0");return C},f=(a(88),a(89),function(e){return e.SELECT_FILE="SELECT_FILE",e.SELECT_FOLDER="SELECT_FOLDER",e.DOWNLOAD="DOWNLOAD",e.DELETE_FILE="DELETE_FILE",e.DELETE_FOLDER="DELETE_FOLDER",e.RENAME_FOLDER="RENAME_FOLDER",e.RENAME_FILE="RENAME_FILE",e.CREATE_FILE="CREATE_FILE",e.CREATE_FOLDER="CREATE_FOLDER",e.MOVE_FILE="MOVE_FILE",e.MOVE_FOLDER="MOVE_FOLDER",e.CHOOSE_FILE="CHOOSE_FILE",e.CHOOSE_FOLDER="CHOOSE_FOLDER",e}(f||{}));const _=e=>o.a.setComponentValue(e);class g extends o.b{constructor(e){super(e),this.args=void 0,this.onResized=e=>{this.ajustHeight()},this.render=()=>n.a.createElement(E.a,Object.assign({},this.args,{checkOrigin:!1,autoResize:!0,onResized:this.onResized,frameBorder:0,style:{width:"100%"},src:this.args.static_file_server_path})),this.args=e.args}ajustHeight(e){o.a.setFrameHeight()}componentDidMount(){this.args.path;const e=this.args;window.addEventListener("message",(function(t){var a,l,n,i,s;if("filebrowser_file_selected"===(null===(a=t.data)||void 0===a?void 0:a.event)||"filebrowser_dir_selected"===(null===(l=t.data)||void 0===l?void 0:l.event)||"filebrowser_file_double_selected"===(null===(n=t.data)||void 0===n?void 0:n.event)||"filebrowser_path_changed"===(null===(i=t.data)||void 0===i?void 0:i.event)||"filebrowser_file_choose"===(null===(s=t.data)||void 0===s?void 0:s.event)){var o,r,d,c,E,m;const a={path:h()(t,"data.data.file.path","")};h()(t,"data.data.file.name","")&&(a.name=h()(t,"data.data.file.name","")),h()(t,"data.data.file.size",0)&&(a.size=h()(t,"data.data.file.size",0)),h()(t,"data.data.file.create_time",0)&&(a.create_time=h()(t,"data.data.file.create_time",0)),h()(t,"data.data.file.update_time",0)&&(a.update_time=h()(t,"data.data.file.update_time",0)),h()(t,"data.data.file.access_time",0)&&(a.access_time=h()(t,"data.data.file.access_time",0)),"filebrowser_file_selected"===(null===(o=t.data)||void 0===o?void 0:o.event)&&_({type:f.SELECT_FILE,target:a}),"filebrowser_dir_selected"===(null===(r=t.data)||void 0===r?void 0:r.event)&&_({type:f.SELECT_FOLDER,target:a});const{show_choose_file:l,show_choose_folder:n}=e;"filebrowser_file_double_selected"===(null===(d=t.data)||void 0===d?void 0:d.event)&&l&&_({type:f.CHOOSE_FILE,target:[a]}),"filebrowser_file_choose"===(null===(c=t.data)||void 0===c?void 0:c.event)&&l&&_({type:f.CHOOSE_FILE,target:[a]}),"filebrowser_folder_choose"===(null===(E=t.data)||void 0===E?void 0:E.event)&&n&&_({type:f.CHOOSE_FOLDER,target:[a]}),"filebrowser_path_changed"===(null===(m=t.data)||void 0===m?void 0:m.event)&&_({type:f.SELECT_FOLDER,target:a})}})),this.ajustHeight()}componentDidUpdate(){this.ajustHeight()}}class F extends o.b{constructor(e){var t;super(e),t=this,this.args=void 0,this.folderOpenHandler=e=>this.ajustHeight(),this.folderCloseHandler=e=>this.ajustHeight(),this.fileSelectedHandler=e=>{if(!this.args.ignore_file_select_event){const t=this.args.files.find(t=>t.path===e.key);t&&_({type:f.SELECT_FILE,target:t})}},this.folderSelectedHandler=e=>{if(!this.args.ignore_folder_select_event){this.args.files.filter(t=>t.path!==e.key&&t.path.startsWith(e.key))&&_({type:f.SELECT_FOLDER,target:{path:e.key}})}},this.downlandHandler=e=>{const t=this.args.files.filter(t=>e.includes(t.path));t.forEach(e=>{var t;let a=new URL(e.path,this.args.artifacts_download_site).toString(),l=a.substring(a.lastIndexOf("/")+1),n=document.createElement("a");n.target="_blank",n.href=a,n.download=l,document.body.appendChild(n),n.click(),null===(t=n.parentNode)||void 0===t||t.removeChild(n)}),t.length&&_({type:f.DOWNLOAD,target:t})},this.deleteFileHandler=e=>{const t=this.args.files.filter(t=>"string"===typeof e?e===t.path:e.includes(t.path));console.log("deleteFileHandler","key",e,"files ",t),t.length&&_({type:f.DELETE_FILE,target:t});const a=this.args.files.filter(t=>"string"===typeof e?e!==t.path:!e.includes(t.path));this.args.files=a},this.createFolderHandler=e=>{_({type:f.CREATE_FOLDER,target:{path:e}})},this.chooseHandler=e=>{const t=e.filter(e=>e.endsWith("/")).map(e=>({path:e})),a=this.args.files.filter(t=>e.includes(t.path)&&!t.path.endsWith("/"));return t.length&&!a.length?_({type:f.CHOOSE_FOLDER,target:t}):a.length&&!t.length?_({type:f.CHOOSE_FILE,target:a}):a.length&&t.length?_([{type:f.CHOOSE_FOLDER,target:t},{type:f.CHOOSE_FILE,target:a}]):void 0},this.renameFileHandler=(e,t)=>{const a=this.args.files.find(t=>t.path===e);a&&_({type:f.RENAME_FILE,target:{path:t,name:a.name}})},this.renameFolderHandler=(e,t)=>{console.log("renameFolderHandler",e,t);const a=this.args.files.find(t=>t.path.substring(0,t.path.lastIndexOf("/")+1)===e);a&&_({type:f.RENAME_FOLDER,target:{path:t,name:a.path.substring(0,a.path.lastIndexOf("/")+1)}})},this.convertFiles=e=>e.map(e=>({key:e.path,modified:e.update_time||0,size:e.size||0})),this.noop=()=>n.a.createElement(n.a.Fragment,null),this.render=()=>n.a.createElement("div",null,n.a.createElement(d.a,Object.assign({},this.args,{showActionBar:!0,canFilter:!0,detailRenderer:this.noop,icons:r.Icons.FontAwesome(4),files:this.convertFiles(this.args.files),onFolderOpen:this.folderOpenHandler,onFolderClose:this.folderCloseHandler,onSelect:this.fileSelectedHandler,onSelectFolder:this.folderSelectedHandler,onDownloadFile:this.downlandHandler,onDeleteFile:this.deleteFileHandler,onCreateFolder:this.createFolderHandler,onRenameFile:this.renameFileHandler,onRenameFolder:this.renameFolderHandler,actionRenderer:function(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return m({...a[0],canChooseFile:t.args.show_choose_file,canChooseFolder:t.args.show_choose_folder,canCreateFolder:t.args.show_new_folder,canRenameFile:t.args.show_rename_file,canRenameFolder:t.args.show_rename_folder,canDownloadFile:t.args.show_download_file&&!!t.args.artifacts_download_site,canDeleteFile:t.args.show_delete_file,onChooseFolder:()=>t.chooseHandler(a[0].selectedItems.map(e=>e.key)),onChooseFile:()=>t.chooseHandler(a[0].selectedItems.map(e=>e.key)),onDeleteFile:()=>t.deleteFileHandler(a[0].selectedItems.map(e=>e.key))})}}))),this.args=e.args}ajustHeight(e){const t=document.getElementById("root");if(t){const a=Math.min(t.clientHeight,t.scrollHeight,t.offsetHeight);o.a.setFrameHeight(a-(e||0)),setTimeout(o.a.setFrameHeight,1)}}componentDidMount(){this.ajustHeight()}componentDidUpdate(){this.ajustHeight()}}const p=Object(o.c)(F),u=Object(o.c)(g);class O extends o.b{constructor(e){super(e),this.args=void 0,this.args=e.args}render(){return this.args.static_file_server_path?n.a.createElement("div",null,n.a.createElement(u,this.props)):n.a.createElement("div",null,n.a.createElement(p,this.props))}}var v=Object(o.c)(O);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(v,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.5cb29c17.chunk.js.map