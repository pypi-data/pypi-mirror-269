import{p as W,g as Z,l as t,v as Y,r as H,f as X,aa as M,O as ee,w as te,c as z,y as i,E as p,A as a,z as u,I as d,x as c,H as T,B as v,Q as w,N as r,n as N,F as I,G as B,ag as F,J as U,M as D,aq as ie,L as P,ar as ae,Z as oe,K as le}from"./index-e734c256.js";import{B as x,_ as G,L as q,C as se}from"./Container-235383e5.js";import{M as S,g as j,b as ne}from"./VBadge-e60e80c3.js";import{e as re,a as me}from"./contextmenu-c35de49a.js";import{a as de,i as ue,V as J,n as $,l as A,v as pe,k as ce}from"./forwardRefs-708ed339.js";import{d as E,e as ye,b as O}from"./VMenu-ec95eec6.js";import{a as fe,V as ge}from"./VCardText-35ed9014.js";import{a as V,V as K,b as ve}from"./VCard-4532b814.js";import{V as be}from"./VTooltip-ebb61ea6.js";import{b as he,c as ke}from"./layout-f1bc9409.js";import{V as _e}from"./VDialog-7155dc5f.js";import{V as Ce}from"./VInput-8a0f3c4b.js";import{V as $e}from"./VToolbar-c9911418.js";const Ve=W({...de(),...he()},"VLayout"),we=Z()({name:"VLayout",props:Ve(),setup(h,m){let{slots:y}=m;const{layoutClasses:k,layoutStyles:L,getLayoutItem:n,items:f,layoutRef:g}=ke(h);return ue(()=>{var o;return t("div",{ref:g,class:[k.value,h.class],style:[L.value,h.style]},[(o=y.default)==null?void 0:o.call(y)])}),{getLayoutItem:n,items:f}}}),Le={key:0,xs5:"","pa-5":"",style:{height:"100%","min-width":"230px","margin-top":"15px","margin-bottom":"15px","margin-right":"24px","align-content":"center"}},Te={key:0},Ie={key:1},Be={style:{"padding-bottom":"10px"}},Ae=["onClick"],De={style:{color:"primary"}},Pe={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},Re=["innerHTML"],He={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Xe=Y({__name:"InfoHeader",props:{item:{}},setup(h){const m=h,y=H(!1),k=H(),{mobile:L}=X(),n=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,f=M();ee(),te(()=>m.item,async e=>{e&&(k.value=j(m.item,F.FANART)||j(m.item,F.THUMB))},{immediate:!0});const g=function(e){f.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},o=function(e){f.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},_=z(()=>{let e="";return m.item?(m.item.metadata&&m.item.metadata.description?e=m.item.metadata.description:m.item.metadata&&m.item.metadata.copyright?e=m.item.metadata.copyright:"artists"in m.item&&m.item.artists.forEach(function(l){"metadata"in l&&l.metadata.description&&(e=l.metadata.description)}),e=e.replace(`\r
`,"<br /><br /><br />"),e=e.replace("\r","<br /><br />"),e=e.replace(`
`,"<br /><br />"),e):""}),R=z(()=>{const e=L.value?160:260;return _.value.length>e?_.value.substring(0,e)+"...":_.value});return(e,l)=>(i(),p("div",null,[t(K,{variant:"flat",img:c(n),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:a(()=>[e.item?d("",!0):(i(),u(pe,{key:0,indeterminate:""})),t(J,{width:"100%",height:"100%",cover:"",class:"background-image",src:k.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),c(U).prevScrollName?(i(),u(x,{key:1,"xx-large":"",style:{position:"absolute",width:"40px, height:40px",left:"4px",top:"10px"},icon:"mdi-arrow-left",title:e.$t("tooltip.back"),onClick:l[0]||(l[0]=T(C=>c(f).go(-1),["stop"]))},null,8,["title"])):d("",!0),e.item?(i(),u(we,{key:2,style:{margin:"0",position:"absolute",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:a(()=>{var C;return[e.$vuetify.display.mobile?d("",!0):(i(),p("div",Le,[e.item.media_type&&[c(D).ARTIST,c(D).PLAYLIST].includes(e.item.media_type)?(i(),p("div",Te,[t(E,{size:"192"},{default:a(()=>[t(S,{item:e.item,height:300,width:300},null,8,["item"])]),_:1})])):(i(),p("div",Ie,[t(S,{width:300,item:e.item},null,8,["item"])]))])),v("div",null,[t(fe,null,{default:a(()=>[w(r(e.item.name),1)]),_:1}),v("div",Be,["version"in e.item&&e.item.version?(i(),u(V,{key:0,class:"caption"},{default:a(()=>[w(r(e.item.version)+" ",1),t(be,{location:"bottom"},{activator:a(({props:s})=>[c(ie)(e.item.metadata.explicit||!1)?(i(),u($,N({key:0},s,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):d("",!0)]),default:a(()=>[v("span",null,r(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):d("",!0),"artists"in e.item&&e.item.artists?(i(),u(V,{key:1,class:"title accent--text"},{default:a(()=>[t($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(i(!0),p(I,null,B(e.item.artists,(s,b)=>(i(),p("span",{key:s.item_id},[v("a",{style:{color:"accent"},onClick:Q=>o(s)},r(s.name),9,Ae),b+1<e.item.artists.length?(i(),p("span",{key:b,style:{color:"accent"}},r(" / "))):d("",!0)]))),128))]),_:1})):d("",!0),"artist"in e.item&&e.item.artist?(i(),u(V,{key:2,class:"title"},{default:a(()=>[t($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),v("a",{onClick:l[1]||(l[1]=s=>o(e.item.artist))},r(e.item.artist.name),1)]),_:1})):d("",!0),"owner"in e.item&&e.item.owner?(i(),u(V,{key:3,class:"title"},{default:a(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),v("a",De,r(e.item.owner),1)]),_:1})):d("",!0),"album"in e.item&&e.item.album?(i(),u(V,{key:4},{default:a(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),v("a",{style:{color:"secondary"},onClick:l[2]||(l[2]=s=>{var b;return g((b=e.item)==null?void 0:b.album)})},r(e.item.album.name),1)]),_:1})):d("",!0)]),v("div",Pe,[t(A,{color:"primary","prepend-icon":"mdi-play-circle",disabled:!((C=c(U).selectedPlayer)!=null&&C.available),onClick:l[3]||(l[3]=s=>c(re).emit("playdialog",{items:[e.item],parentItem:e.item,showContextMenuItems:!1}))},{default:a(()=>[w(r(e.$t("play")),1)]),_:1},8,["disabled"]),t(ye,null,{activator:a(({props:s})=>[t(x,N({icon:"",style:{"margin-top":"-8px"}},s),{default:a(()=>[t($,{icon:"mdi-dots-vertical"})]),_:2},1040)]),default:a(()=>[t(O,null,{default:a(()=>[(i(!0),p(I,null,B(c(me)([e.item],e.item).filter(s=>s.hide!=!0),(s,b)=>(i(),u(q,{key:b,title:e.$t(s.label,s.labelArgs),disabled:s.disabled==!0,onClick:Q=>s.action?s.action():""},{prepend:a(()=>[t(E,{icon:s.icon},null,8,["icon"])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1}),t(A,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[l[4]||(l[4]=s=>c(P).toggleFavorite(e.item)),l[5]||(l[5]=T(()=>{},["prevent"])),l[6]||(l[6]=T(()=>{},["stop"]))]},null,8,["icon","title"]),t(G,{domain:e.item.provider,size:25,style:{"margin-top":"4px"}},null,8,["domain"])]),R.value?(i(),u(V,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:l[7]||(l[7]=s=>y.value=!y.value)},{default:a(()=>[v("div",{innerHTML:R.value},null,8,Re)]),_:1})):d("",!0),e.item&&e.item.metadata.genres?(i(),p("div",He,[(i(!0),p(I,null,B(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),s=>(i(),u(Ce,{key:s,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:a(()=>[w(r(s),1)]),_:2},1024))),128))])):d("",!0)])]}),_:1})):d("",!0)]),_:1},8,["img"]),t(_e,{modelValue:y.value,"onUpdate:modelValue":l[9]||(l[9]=C=>y.value=C),"max-width":"975",width:"auto"},{default:a(()=>[t(K,null,{default:a(()=>[t(ge,{innerHTML:_.value},null,8,["innerHTML"]),t(ve,null,{default:a(()=>[t(A,{color:"primary",block:"",onClick:l[8]||(l[8]=C=>y.value=!1)},{default:a(()=>[w(r(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const ze={style:{"margin-bottom":"10px"}},Ne={key:0},Fe=["title","onClick"],Ue=["title"],Me=Y({__name:"ProviderDetails",props:{itemDetails:{}},setup(h){const m=function(n){window.open(n,"_blank")},y=ae({}),k=function(n){const f=`${n.provider_instance}.${n.item_id}`,g=y[f];if(g)g.load(),delete y[f];else{const o=new Audio(L(n.provider_instance,n.item_id));y[f]=o,o.play()}},L=function(n,f){return`${P.baseUrl}/preview?item_id=${encodeURIComponent(f)}&provider=${n}`};return(n,f)=>(i(),p("section",ze,[t($e,{color:"transparent",title:n.$t("mapped_providers"),style:{height:"55px"}},null,8,["title"]),t(ce),t(se,null,{default:a(()=>[t(O,null,{default:a(()=>{var g;return[(i(!0),p(I,null,B((g=n.itemDetails)==null?void 0:g.provider_mappings,o=>(i(),u(q,{key:o.provider_instance},{prepend:a(()=>[t(G,{domain:o.provider_domain,size:30},null,8,["domain"])]),title:a(()=>[w(r(c(P).providerManifests[o.provider_domain].name),1)]),subtitle:a(()=>[n.itemDetails.media_type==c(D).TRACK&&o.audio_format?(i(),p("span",Ne,r(o.audio_format.content_type)+" | "+r(o.audio_format.sample_rate/1e3)+"kHz/"+r(o.audio_format.bit_depth)+" bits | ",1)):d("",!0),o.url&&!o.provider_domain.startsWith("file")?(i(),p("a",{key:1,style:{opacity:"0.4"},title:n.$t("tooltip.open_provider_link"),onClick:T(_=>m(o.url),["prevent"])},r(o.url),9,Fe)):(i(),p("span",{key:2,style:{opacity:"0.4"},title:o.item_id},r(o.item_id),9,Ue))]),append:a(()=>[o.audio_format&&o.audio_format.bit_depth>16?(i(),u(J,{key:0,src:c(ne),width:"30",class:oe(n.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):d("",!0),c(le)("bp1")&&n.itemDetails.media_type==c(D).TRACK?(i(),u(A,{key:1,icon:y[`${o.provider_instance}.${o.item_id}`]?"mdi-pause":"mdi-play-circle",title:n.$t("tooltip.play_sample"),onClick:_=>k(o)},null,8,["icon","title","onClick"])):d("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]))}});export{Xe as _,Me as a};
