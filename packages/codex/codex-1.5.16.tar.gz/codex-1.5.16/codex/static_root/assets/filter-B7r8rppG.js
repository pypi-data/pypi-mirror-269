import{x as I,r as v,h as L,u as F,w as O,cy as w,cO as j}from"./admin-drawer-panel-BFTD31i8.js";const x=(t,l,e)=>t==null||l==null?-1:t.toString().toLocaleLowerCase().indexOf(l.toString().toLocaleLowerCase()),A=I({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function S(t,l,e){var g;const f=[],s=(e==null?void 0:e.default)??x,y=e!=null&&e.filterKeys?w(e.filterKeys):!1,i=Object.keys((e==null?void 0:e.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return f;e:for(let r=0;r<t.length;r++){const[a,M=a]=w(t[r]),m={},u={};let c=-1;if(l&&!(e!=null&&e.noFilter)){if(typeof a=="object"){const K=y||Object.keys(M);for(const n of K){const b=j(M,n),k=(g=e==null?void 0:e.customKeyFilter)==null?void 0:g[n];if(c=k?k(b,l,a):s(b,l,a),c!==-1&&c!==!1)k?m[n]=c:u[n]=c;else if((e==null?void 0:e.filterMode)==="every")continue e}}else c=s(a,l,a),c!==-1&&c!==!1&&(u.title=c);const h=Object.keys(u).length,d=Object.keys(m).length;if(!h&&!d||(e==null?void 0:e.filterMode)==="union"&&d!==i&&!h||(e==null?void 0:e.filterMode)==="intersection"&&(d!==i||!h))continue}f.push({index:r,matches:{...u,...m}})}return f}function C(t,l,e,f){const s=v([]),y=v(new Map),i=L(()=>f!=null&&f.transform?F(l).map(r=>[r,f.transform(r)]):F(l));O(()=>{const r=typeof e=="function"?e():F(e),a=typeof r!="string"&&typeof r!="number"?"":String(r),M=S(i.value,a,{customKeyFilter:{...t.customKeyFilter,...F(f==null?void 0:f.customKeyFilter)},default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),m=F(l),u=[],c=new Map;M.forEach(h=>{let{index:d,matches:K}=h;const n=m[d];u.push(n),c.set(n.value,K)}),s.value=u,y.value=c});function g(r){return y.value.get(r.value)}return{filteredItems:s,filteredMatches:y,getMatches:g}}export{A as m,C as u};
