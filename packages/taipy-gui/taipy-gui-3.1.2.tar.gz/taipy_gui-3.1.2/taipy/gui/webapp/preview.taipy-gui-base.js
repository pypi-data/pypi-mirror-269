!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TaipyGuiBase=e():t.TaipyGuiBase=e()}(this,(()=>(()=>{"use strict";var t,e={5786:(t,e,n)=>{n.r(e),n.d(e,{TaipyApp:()=>p,createApp:()=>g,default:()=>f});var i=n(3829);const a="TaipyClientId",o=(t,e,n,a,o,r="",s=!0,d)=>{const c=(0,i.A)(),l={type:e,name:n,payload:a,propagate:s,client_id:o,ack_id:c,module_context:r};return null==t||t.emit("message",l,d),c},r=new Worker(new URL(n.p+n.u(677),n.b));var s=n(9080),d=n(5364),c=n.n(d);class l{constructor(t){this._data={},this._init_data={},this.init(t)}init(t){const e={};for(const n in this._init_data)if(n in t)for(const i in this._init_data[n])i in t[n]||(n in e||(e[n]={}),e[n][i]=this._init_data[n][i]);else e[n]=this._init_data[n];0!==Object.keys(e).length&&console.error("Unmatched data tree! Removed changes: ",e),this._init_data=t,this._data={};for(const t in this._init_data)for(const e in this._init_data[t]){const n=this._init_data[t][e];this._data[n.encoded_name]=n.value}return e}getEncodedName(t,e){if(e in this._init_data&&t in this._init_data[e])return this._init_data[e][t].encoded_name}getName(t){for(const e in this._init_data)for(const n in this._init_data[e])if(this._init_data[e][n].encoded_name===t)return[n,e]}get(t){if(!(t in this._data))throw new Error(`${t} is not available in Taipy Gui`);return this._data[t]}getInfo(t){for(const e in this._init_data)for(const n in this._init_data[e]){const i=this._init_data[e][n];if(i.encoded_name===t)return Object.assign(Object.assign({},i),{value:this._data[t]})}}getDataTree(){return this._init_data}getAllData(){return this._data}update(t,e){if(!(t in this._data))throw new Error(`${t} is not available in Taipy Gui`);this._data[t]=e}}const h=["ID","AID","GMC"],u=(t,e)=>{h.includes(t.type)&&""!==e.clientId&&""!==e.appId&&""!==e.context&&o(e.socket,"GDT","get_data_tree",{},e.clientId,e.context)};class p{constructor(t=void 0,e=void 0,n=void 0,i=void 0){i=i||(0,s.io)("/",{autoConnect:!1}),this.onInit=t,this.onChange=e,this.variableData=void 0,this.functionData=void 0,this.clientId="",this.context="",this.appId="",this.path=n,this.socket=i,((t,e)=>{t.on("connect",(()=>{""!==e.clientId&&""!==e.appId||e.init()})),t.io.on("reconnect",(()=>{console.log("WebSocket reconnected"),o(t,"AID","reconnect",e.appId,e.clientId,e.context)})),t.on("connect_error",(e=>{console.log("Error connecting WebSocket: ",e),setTimeout((()=>{t&&t.connect()}),500)})),t.on("disconnect",((e,n)=>{console.log("WebSocket disconnected due to: ",e,n),"io server disconnect"===e&&t&&t.connect()})),t.on("message",(t=>{((t,e)=>{var n;if(t.type){if("MU"===t.type&&Array.isArray(t.payload))for(const i of t.payload){const t=i.name,{value:a}=i.payload;null===(n=e.variableData)||void 0===n||n.update(t,a),e.onChange&&e.onChange(e,t,a)}else if("ID"===t.type){const{id:n}=t;(t=>{localStorage&&localStorage.setItem(a,t)})(n),e.clientId=n,e.updateContext(e.path)}else if("GMC"===t.type){const n=t.payload.data;window.localStorage.setItem("ModuleContext",n),e.context=n}else if("GDT"===t.type){const n=t.payload,i=n.variable,a=n.function;if(e.variableData&&e.functionData){const t=e.variableData.init(i),n=e.functionData.init(a),o=c()(t,n);(t||n)&&e.onReload&&e.onReload(e,o)}else e.variableData=new l(i),e.functionData=new l(a),e.onInit&&e.onInit(e)}else if("AID"===t.type){const n=t.payload;if("reconnect"===n.name)return e.init();e.appId=n.id}else if("AL"===t.type&&e.onNotify){const n=t;e.onNotify(e,n.atype,n.message)}u(t,e)}})(t,e)})),t.connected||t.connect()})(i,this)}get onInit(){return this._onInit}set onInit(t){if(void 0!==t&&1!==t.length)throw new Error("onInit() requires one parameter");this._onInit=t}get onChange(){return this._onChange}set onChange(t){if(void 0!==t&&3!==t.length)throw new Error("onChange() requires three parameters");this._onChange=t}get onNotify(){return this._onNotify}set onNotify(t){if(void 0!==t&&3!==t.length)throw new Error("onNotify() requires three parameters");this._onNotify=t}get onReload(){return this._onReload}set onReload(t){if(void 0!==t&&2!==(null==t?void 0:t.length))throw new Error("_onReload() requires two parameters");this._onReload=t}init(){this.clientId="",this.context="",this.appId="";const t=((t,e,n)=>{const i=localStorage&&localStorage.getItem(t);return i||""})(a);o(this.socket,"ID",a,t,t,void 0,!1),o(this.socket,"AID","connect","",t,void 0,!1),""!==t&&(this.clientId=t,this.updateContext(this.path))}getEncodedName(t,e){var n;return null===(n=this.variableData)||void 0===n?void 0:n.getEncodedName(t,e)}getName(t){var e;return null===(e=this.variableData)||void 0===e?void 0:e.getName(t)}get(t){var e;return null===(e=this.variableData)||void 0===e?void 0:e.get(t)}getInfo(t){var e;return null===(e=this.variableData)||void 0===e?void 0:e.getInfo(t)}getDataTree(){var t;return null===(t=this.variableData)||void 0===t?void 0:t.getDataTree()}getAllData(){var t;return null===(t=this.variableData)||void 0===t?void 0:t.getAllData()}getFunctionList(){var t;const e=null===(t=this.functionData)||void 0===t?void 0:t.getDataTree()[this.context];return Object.keys(e||{})}update(t,e){o(this.socket,"U",t,{value:e},this.clientId,this.context)}getContext(){return this.context}updateContext(t=""){t&&""!==t||(t=window.location.pathname.slice(1)),o(this.socket,"GMC","get_module_context",{path:t},this.clientId)}trigger(t,e,n={}){n.action=t,o(this.socket,"A",e,n,this.clientId,this.context)}upload(t,e,n){return((t,e,n,i,a="/taipy-uploads")=>new Promise(((o,s)=>{r.onmessage=t=>{t.data.error?s(t.data.message):t.data.done?o(t.data.message):n(t.data.progress)},r.onerror=t=>s(t),r.postMessage({files:e,uploadUrl:a,varName:t,id:i})})))(t,e,n,this.clientId)}getPageMetadata(){return JSON.parse(localStorage.getItem("tp_cp_meta")||"{}")}}const g=(t,e,n,i)=>new p(t,e,n,i),f=p}},n={};function i(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t](o,o.exports,i),o.loaded=!0,o.exports}i.m=e,t=[],i.O=(e,n,a,o)=>{if(!n){var r=1/0;for(l=0;l<t.length;l++){for(var[n,a,o]=t[l],s=!0,d=0;d<n.length;d++)(!1&o||r>=o)&&Object.keys(i.O).every((t=>i.O[t](n[d])))?n.splice(d--,1):(s=!1,o<r&&(r=o));if(s){t.splice(l--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[n,a,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.u=t=>t+".taipy-gui-base.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{i.b=document.baseURI||self.location.href;var t={685:0};i.O.j=e=>0===t[e];var e=(e,n)=>{var a,o,[r,s,d]=n,c=0;if(r.some((e=>0!==t[e]))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(d)var l=d(i)}for(e&&e(n);c<r.length;c++)o=r[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(l)},n=this.webpackChunkTaipyGuiBase=this.webpackChunkTaipyGuiBase||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var a=i.O(void 0,[804],(()=>i(5786)));return i.O(a)})()));